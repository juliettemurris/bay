---
title: "TP2 : Evaluation d'un algorithme de classification"
author: "Juliette Murris"
date: "Janvier 2024"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


Dans ce TP nous travaillerons sur la base de donn√©es _lung_ disponible dans R. Vous avez d√©j√† explorer les donn√©es dans le TP1 d'un point de vue de l'analyse de la survie. Ici l'objectif est d'√©valuer un mod√®le de classification qui classe les patient selon leur statut vital. 


## Pr√©requis : 

T√©l√©chargement des packages n√©cessaires.

```{r, echo=TRUE,message=FALSE,warning=FALSE}
  library(survival)
  library(dplyr)
  library(pROC)
  library(ModelMetrics)
```

Chargement des donn√©es : 

```{r}
  data(lung)
```



## I. Construction d'une base d'entrainement et d'une base de validation :

<span style='color: #a13203; font-weight: 600;'>üí¨ Question 1 </span>  La cr√©ation de ces deux bases avec un ratio 80/20

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```




## II. Construction :

<span style='color: #a13203; font-weight: 600;'>üí¨ Question 1 </span>  Cr√©er une r√©gression logistique cherchant √† expliquer le d√©c√®s par les variables suivantes : _age_, _sex_, _ph.ecog_, _ph.karno_, _pat.karno_, _meal.cal_, _wt.loss_ 

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```




<span style='color: #a13203; font-weight: 600;'>üí¨ Question 2 </span>  Ajouter dans la base _Training_set2_ une variable correspondant √† la probabilit√© de d√©c√®s 

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```

<span style='color: #a13203; font-weight: 600;'>üí¨ Question 3 </span>  Utiliser la fonction _roc_ du package proc pour afficher la courbe ROC et donner l'AUC 

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```



<span style='color: #a13203; font-weight: 600;'>üí¨ Question 4</span>  Identifier parmi les √©l√©ments fournis par la fonction _roc_ lesquels peuvent √™tre utilis√©s pour identifier le cut_off optimal 

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```




<span style='color: #a13203; font-weight: 600;'>üí¨ Question 5 </span>  D√©terminer le cutoff optimal  

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```



<span style='color: #a13203; font-weight: 600;'>üí¨ Question 6 </span>  Cr√©er une variable _status.est_ qui est la probabilit√© de d√©c√®s estim√©e par le mod√®le en fonction du cutoff pr√©c√©demment d√©termin√© 

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```






<span style='color: #a13203; font-weight: 600;'>üí¨ Question 7 </span>  Cr√©er la matrice de confusion de ce mod√®le 

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```


<span style='color: #a13203; font-weight: 600;'>üí¨ Question 8 </span>  Calculer la sensibilit√©, la sp√©cificit√©, l'accuracy et la pr√©cision " √† la main"

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```





## II. Mesure de l'erreur sur la base de test:


L'objectif de cette partie est d'√©valuer les performances du mod√®le sur la base de test.

<span style='color: #a13203; font-weight: 600;'>üí¨ Question 1 </span>  Calculer les pr√©dictions 

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```

<span style='color: #a13203; font-weight: 600;'>üí¨ Question 2 </span>  Calculer la sensibilit√© et sp√©cificit√© √† partir du package _ModelMetrics_ 

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```


