---
title: 'TP1 : Mod√®le de Cox et pr√©diction'
author: "Juliette Murris"
date: "Janvier 2024"
output:
  html_document: default
  word_document: default
  pdf_document: default
---


Dans ce TP nous travaillerons sur la base de donn√©es _lung_ disponible dans R. 

## Pr√©requis : 

T√©l√©chargement des packages n√©cessaires.

```{r, echo=TRUE,message=FALSE,warning=FALSE}
  library(survival)
  library(dplyr)
```

Chargement des donn√©es : 

```{r}
data(lung)
head(lung)
?lung
```




## I. Exploration des donn√©es :

 <span style='color: #a13203; font-weight: 600;'>üí¨ Question 1 </span> Donnez la liste des variables constituant la base ainsi que leur signification

```{r,include=TRUE}
# R√©ponse :
?lung
# 
# 
#
#
#
#
#
#
```


<span style='color: #a13203; font-weight: 600;'>üí¨ Question 2 </span> D√©terminez quelles sont les deux variables n√©cessaires pour la construction d'un mod√®le de survie. Que remarquez vous ?


```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```


 <span style='color: #a13203; font-weight: 600;'>üí¨ Question 3 </span> Doit-on modifier les variables pr√©c√©dentes pour appliquer un mod√®le de cox ? Si oui laquelle ?

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```


## II. Cr√©ation d'un mod√®le de Cox :

<span style='color: #a13203; font-weight: 600;'>üí¨ Question 1 </span> Evaluez l'impact de chacune des covariables (√† l'exception de l'institution) sur le d√©c√®s. Interpr√©tez les r√©sultats obtenus. Stockez les coefficients dans un vecteur.

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```




## III. Utilisation du mod√®le de Cox pour pr√©dire la survie :


<span style='color: #a13203; font-weight: 600;'>üí¨ Question 1 </span> Cr√©ez 3 vecteurs comprenant les diff√©rentes pr√©dictions obtenues par la fonction predict.coxph (terms, lp, risk)



```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```



<span style='color: #a13203; font-weight: 600;'>üí¨ Question 2 </span> V√©rifiez que la prediction "term" renvoie pour la covariable $j$ du patient $i$ le r√©sultat suivant :


$$ pred.term^i_j = \beta_j Z^i_j - \overline{\beta_j Z_j}$$

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```




<span style='color: #a13203; font-weight: 600;'>üí¨ Question 3 </span> V√©rifiez que la prediction "lp" renvoie pour le patient $i$ le r√©sultat suivant :


$$ pred.lp^i_j = \sum^p_{j=1} pred.term^i_j = \sum^p_{j=1} (\beta_j Z^i_j - \overline{\beta_j Z_j})$$

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```





<span style='color: #a13203; font-weight: 600;'>üí¨ Question 4 </span> V√©rifiez que la prediction "risk" renvoie pour le patient $i$ le r√©sultat suivant :



$$ pred.risk^i_j = e^{pred.lp^i_j} = e^{\sum^p_{j=1} pred.term^i_j} = e^{\sum^p_{j=1} (\beta_j Z^i_j - \overline{\beta_j Z_j})}$$

```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```





<span style='color: #a13203; font-weight: 600;'>üí¨ Question 5 </span> Comment interpr√©ter les predictions de risque ?


```{r,include=TRUE}
# R√©ponse :
# 
# 
# 
#
#
#
#
#
#
```

